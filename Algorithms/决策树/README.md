## ID3

#### V1：

Score：0.74162    

Time：

- 训练：5.9002
- 预测：0.1884

#### V2：

Score：0.74641    

Time：

- 训练：6.6842
- 预测：0.1371



一、问题：

1. 对于新数据集会出现划分不到某一类的情况，输出None，手动划分为树模型叶子节点对应的最多的类别；

   此问题原因：见修改1。

2. 如果某特征出现训练集中未包含的属性，则程序会报错；

3. 在计算某一特征的信息增益（信息增益率）时是否考虑当前节点下该特征不存在的特征值？

   如特征A的categories = {1,2,3,4,5}，当前节点下的unique = {1,2,3}，是够在计算时算上特征值{4,5}？

   【检验】

   结果一致。

   $$H(D|A) = \sum_{i=1}^n\cfrac{|D_i|}{|D|}H(D_i)=\sum_{i=1}^n\cfrac{|D_i|}{|D|}\sum_{k=1}^K\cfrac{|D_{ik}|}{|D_i|}log_2\cfrac{|D_{ik}|}{|D_i|}$$    

   特征值不存在时，$D_{ik}=0,D_i=0$

   ```
   if D == 0:
       p_vec = np.zeros(shape=(np.shape(Di_vec)))
   else:
       p_vec = Di_vec / D
   ```


   ```
   for p in p_vec:
       if p != 0:
           h = p * log(p,2)
           h_vec = np.append(h_vec,h)
       else:
           h_vec = np.append(h_vec,0)
   ```

二、修改：

1. 特征分裂时，不按剩余特征类别分裂(unique)，按全部类别分裂(cat.catogaries)。否则，将导致新数据集出现划分不到某一类的情况。【V2】
2. 返回样本最多的类别时，返回的是当前所在数据集D（即当前节点下）最多的类别，不是原始数据集（根节点）的最多类别。【V2】
3. 叶子节点梳理：【V2】
   * Y只存在一种取值，取该值；
   * 信息增益小于阈值，取分裂前的最多类别；
   * 分裂后未空集，取分裂前的最多类别；
   * 只剩下Y一列，取当前的最多类别；



### C4.5    

----------------

#### V1：

Score：0.76076 

Time：

- 训练：6.4905
- 预测：0.1897



#### 版本记录：

**V1:**

1. 在ID3基础上，将信息增益改为信息增益比；



#### 问题：

V1:    

1.  验证集预测，出现了大量的NONE；=> 在计算信息增益率时，IV值为0的情况下（array([[1,1],[0,0]])），得到信息增益率为NAN。
2.  预测集存在None。