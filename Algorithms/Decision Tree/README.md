## ID3

一、问题：

1. 对于新数据集会出现划分不到某一类的情况，输出None，手动划分为树模型叶子节点对应的最多的类别；

   此问题原因：见修改1。

2. 如果某特征出现训练集中未包含的属性，则程序会报错；

3. 在计算某一特征的信息增益（信息增益率）时是否考虑当前节点下该特征不存在的特征值？

   如特征A的categories = {1,2,3,4,5}，当前节点下的unique = {1,2,3}，是够在计算时算上特征值{4,5}？

   【检验】

   结果一致。

   $$H(D|A) = \sum_{i=1}^n\cfrac{|D_i|}{|D|}H(D_i)=\sum_{i=1}^n\cfrac{|D_i|}{|D|}\sum_{k=1}^K\cfrac{|D_{ik}|}{|D_i|}log_2\cfrac{|D_{ik}|}{|D_i|}$$    

   特征值不存在时，$D_{ik}=0,D_i=0$

   ```
   if D == 0:
       p_vec = np.zeros(shape=(np.shape(Di_vec)))
   else:
       p_vec = Di_vec / D
   ```


   ```
   for p in p_vec:
       if p != 0:
           h = p * log(p,2)
           h_vec = np.append(h_vec,h)
       else:
           h_vec = np.append(h_vec,0)
   ```

二、修改：

1. 特征分裂时，不按剩余特征类别分裂(unique)，按全部类别分裂(cat.catogaries)。否则，将导致新数据集出现划分不到某一类的情况。【V2】
2. 返回样本最多的类别时，返回的是当前所在数据集D（即当前节点下）最多的类别，不是原始数据集（根节点）的最多类别。【V2】
3. 叶子节点梳理：【V2】
   * Y只存在一种取值，取该值；
   * 信息增益小于阈值，取分裂前的最多类别；
   * 分裂后未空集，取分裂前的最多类别；
   * 只剩下Y一列，取当前的最多类别；


### C4.5    

----------------

#### 问题：

V1:    

1.  验证集预测，出现了大量的NONE；

    * 在计算信息增益率时，IV值为0的情况下（array([[1,1],[0,0]])），得到信息增益率为NAN。（原因）


    * 如果IV=0，则将信息增益率赋值为0；（解决方案）

2.  预测集中的预测结果存在None，个例。

    * 预测集中，'Parch'存在类别'9'，但训练集不存在该类别，故模型未考虑新增类别问题；
    * 针对未出现的类别，进行特殊处理。具体见《机器学习》（解决方案）
3.  暂不考虑C4.5算法处理连续值问题，连续值处理参考CART算法；



#### 几个细节

1. 信息增益率对可取值少数目较少的特征有所偏好，C4.5并不是直接选择信息增益率最大的候选划分特征，而是使用了一个启发式：先从候选划分特征中找出信息增益高于平均水平的属性，再从中选取信息增益率最高的。
2. C4.5算法对连续值采用二分法。
3. 与离散特征不同，若当前结点划分特征为连续特征，该特征还可作为其后代结点的划分属性。
4. 缺失值的处理，需解决两个问题：
   1. 如何在叶特征值缺失的情况下进行特征选择？
   2. 给定选择的特征，若样本在该特征上的值缺失，如何对样本进行划分？